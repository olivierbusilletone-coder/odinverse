<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ODINVERSE â€” Viking NFT Project</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { background:#0e0e0e; color:#fff; font-family:Arial,sans-serif; text-align:center; padding:50px;}
h1 { font-size:42px; margin-bottom:10px;}
button { padding:14px 28px; font-size:16px; cursor:pointer; border:none; border-radius:8px; background:#ff9800; margin-top:20px;}
button:disabled { opacity:0.6; cursor:default; }
.status { margin-top:15px; font-size:16px; }
#qr { margin-top:20px; }
section { padding:40px 20px; }
footer { padding:20px; background:#000; opacity:0.6; margin-top:40px;}
</style>

</head>
<body>

<header>
    <h1>âš”ï¸ ODINVERSE</h1>
    <p>Le projet NFT Viking ultime sur MultiversX</p>

    <button id="connectBtn">ğŸ” Connect Wallet</button>
    <div class="status" id="status">âŒ Non connectÃ©</div>
    <div class="status" id="address"></div>
    <canvas id="qr"></canvas>
</header>

<section>
    <h2>ğŸ”¥ Le Projet</h2>
    <p>ODINVERSE est une collection NFT inspirÃ©e de la mythologie viking. Guerriers, runes, avantages exclusifs et mini-jeux on-chain.</p>
</section>

<section>
    <h2>ğŸ§  Avantages</h2>
    <p>âš”ï¸ Jeux on-chain Â· ğŸª™ Airdrops Â· ğŸ›¡ï¸ Avantages partenaires Â· ğŸ”¥ Challenges</p>
</section>

<section>
    <h2>ğŸ’ Mint</h2>
    <p>Prix : <strong>0.05 EGLD</strong></p>
    <button disabled>Mint bientÃ´t disponible</button>
</section>

<footer>
    Â© 2025 ODINVERSE â€” Built for warriors
</footer>

<!-- QRCode library -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<!-- WalletConnect 2.0 ESM -->
<script type="module">
import { WalletConnectProvider } from "https://cdn.jsdelivr.net/npm/@multiversx/sdk-wallet-connect-provider@2.6.0/out/index.js";

const connectBtn = document.getElementById("connectBtn");
const statusEl = document.getElementById("status");
const addressEl = document.getElementById("address");
const qrCanvas = document.getElementById("qr");

let provider;

connectBtn.onclick = async () => {
    try {
        statusEl.innerText = "ğŸ”„ Connexion en cours...";
        qrCanvas.style.display = "block";

        const projectId = "f4f84c031236a02d1fda5167859868f4"; // Remplace par ton Project ID WalletConnect
        const relayUrl = "wss://relay.walletconnect.com";
        const chainId = "1"; // Mainnet: 1 | Testnet: T | Devnet: D

        const callbacks = {
            onClientLogin: async () => {
                qrCanvas.style.display = "none";
                const address = await provider.getAddress();
                statusEl.innerText = "âœ… Wallet connectÃ©";
                addressEl.innerText = "ğŸŸ¢ " + address;
                connectBtn.disabled = true;
                connectBtn.innerText = "ğŸ”“ Wallet connectÃ©";
            },
            onClientLogout: () => {
                statusEl.innerText = "âŒ DÃ©connectÃ©";
                addressEl.innerText = "";
                connectBtn.disabled = false;
                connectBtn.innerText = "ğŸ” Connect Wallet";
            },
            onClientEvent: e => console.log("WalletConnect Event:", e)
        };

        provider = new WalletConnectProvider(callbacks, chainId, relayUrl, projectId);

        await provider.init();
        const { uri, approval } = await provider.connect();

        // GÃ©nÃ¨re QR code
        QRCode.toCanvas(qrCanvas, uri, { width: 220 }, function (err) {
            if (err) console.error(err);
        });

        await provider.login({ approval });

    } catch (err) {
        console.error(err);
        statusEl.innerText = "âŒ Erreur : " + err.message;
    }
};
</script>

</body>
</html>
