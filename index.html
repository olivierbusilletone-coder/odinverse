<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ODINVERSE â€” Viking NFT Project</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- âœ… SDK WalletConnect MultiversX -->
<script src="https://cdn.jsdelivr.net/npm/@multiversx/sdk-wallet-connect-provider@2.4.1/out/walletConnectProvider.umd.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    background: #0e0e0e;
    color: #fff;
    text-align: center;
    margin: 0;
}
header {
    padding: 60px 20px;
    background: linear-gradient(180deg, #1a1a1a, #000);
}
button {
    padding: 14px 28px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    background: #ff9800;
}
.status {
    margin-top: 15px;
}
</style>
</head>

<body>

<header>
<h1>âš”ï¸ ODINVERSE</h1>
<p>Projet NFT Viking sur MultiversX</p>

<button id="connectBtn">ğŸ” Connect Wallet</button>
<div class="status" id="status">âŒ Non connectÃ©</div>
<div class="status" id="address"></div>
</header>

<script>
let provider = null;

const statusEl = document.getElementById("status");
const addressEl = document.getElementById("address");
const connectBtn = document.getElementById("connectBtn");

connectBtn.addEventListener("click", connectWallet);

async function connectWallet() {
    statusEl.innerText = "ğŸ”„ Connexion en cours...";
    addressEl.innerText = "";

    try {
        // âœ… BON test SDK
        if (typeof WalletConnectProvider === "undefined") {
            throw new Error("SDK WalletConnect non chargÃ©");
        }

        // ğŸ”‘ WalletConnect Project ID (obligatoire)
        const projectId = "f4f84c031236a02d1fda5167859868f4";

        // ğŸŒ Bridge officiel
        const bridge = "https://bridge.walletconnect.org";

        // ğŸŒ RÃ©seau MultiversX
        const chainId = "1"; // Mainnet

        provider = new WalletConnectProvider(
            bridge,
            { chainId },
            projectId
        );

        await provider.init();

        await provider.login({
            callbackUrl: window.location.href,
            qrCodeModal: true
        });

        const address = await provider.getAddress();

        statusEl.innerText = "âœ… Wallet connectÃ©";
        addressEl.innerText = "ğŸŸ¢ " + address;
        connectBtn.disabled = true;
        connectBtn.innerText = "ğŸ”“ Wallet connectÃ©";

    } catch (err) {
        console.error(err);
        statusEl.innerText = "âŒ Erreur : " + err.message;
    }
}
</script>

</body>
</html>
