<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ODINVERSE â€” Connect Wallet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/@multiversx/sdk-dapp@latest/dist/sdk-dapp.umd.js"></script>
<style>
body { background:#0e0e0e; color:#fff; font-family:Arial, sans-serif; text-align:center; padding:50px;}
button { padding:14px 28px; font-size:16px; border:none; border-radius:8px; background:#ff9800; cursor:pointer;}
.status { margin-top:15px; font-size:16px; }
</style>
</head>
<body>

<h1>âš”ï¸ ODINVERSE</h1>
<button id="connectBtn">ğŸ” Connect Wallet</button>
<p class="status" id="status">âŒ Non connectÃ©</p>
<p class="status" id="address"></p>

<script>
const connectBtn = document.getElementById("connectBtn");
const statusEl = document.getElementById("status");
const addressEl = document.getElementById("address");

let walletProvider;

connectBtn.onclick = async () => {
    try {
        statusEl.innerText = "ğŸ”„ Connexion en cours...";
        addressEl.innerText = "";

        const { init, getWalletConnectProvider, getAccount } = window.mvxSdkDapp;

        await init({ environment: "mainnet" }); // testnet/devnet/mainnet

        walletProvider = getWalletConnectProvider({
            projectId: "f4f84c031236a02d1fda5167859868f4", // remplace par ton Project ID WalletConnect
            chain: "1", // Mainnet
            relayUrl: "wss://relay.walletconnect.com"
        });

        await walletProvider.init();
        await walletProvider.connect();

        // Attendre que l'utilisateur confirme
        setTimeout(() => {
            const account = getAccount();
            if (!account || !account.address) {
                statusEl.innerText = "âŒ Connexion Ã©chouÃ©e";
                return;
            }
            statusEl.innerText = "âœ… Wallet connectÃ©";
            addressEl.innerText = "ğŸŸ¢ " + account.address;
            connectBtn.disabled = true;
            connectBtn.innerText = "ğŸ”“ Wallet connectÃ©";
        }, 1000);

    } catch (err) {
        console.error(err);
        statusEl.innerText = "âŒ Erreur : " + err.message;
    }
};
</script>

</body>
</html>
