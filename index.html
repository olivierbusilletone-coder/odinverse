<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ODINVERSE â€” Viking NFT Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SDK DAPP UMD (OBLIGATOIRE) -->
    <script src="https://cdn.jsdelivr.net/npm/@multiversx/sdk-dapp@2.6.2/out/sdkDapp.umd.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

<button id="connectBtn">ğŸ” Connect Wallet</button>

<p id="status">âŒ Non connectÃ©</p>
<p id="address"></p>

<script>
const {
    WalletConnectLoginButton,
    init,
    logout,
    getAccount
} = window.MultiversXSDKDapp;

async function connectWallet() {
    const status = document.getElementById("status");
    const addressEl = document.getElementById("address");

    status.innerText = "ğŸ”„ Connexion en cours...";

    if (!window.MultiversXSDKDapp) {
        status.innerText = "âŒ SDK WalletConnect non chargÃ©";
        return;
    }

    try {
        await init({
            network: {
                name: "mainnet",
                apiAddress: "https://api.multiversx.com",
                walletConnectV2ProjectId: "multiversx-dapp"
            }
        });

        // ğŸ‘‰ Ouvre le QR WalletConnect
        const loginResult = await window.MultiversXSDKDapp.walletConnectLogin();

        if (!loginResult) {
            status.innerText = "âŒ Connexion annulÃ©e";
            return;
        }

        const account = getAccount();
        addressEl.innerText = "ğŸŸ¢ Wallet connectÃ© : " + account.address;
        status.innerText = "âœ… Connexion rÃ©ussie";

    } catch (err) {
        console.error(err);
        status.innerText = "âŒ Erreur : " + err.message;
    }
}

document.getElementById("connectBtn").addEventListener("click", connectWallet);
</script>

</body>
</html>
