<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ODINVERSE â€” Viking NFT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- SDK MultiversX WalletConnect -->
<script src="https://cdn.jsdelivr.net/npm/@multiversx/sdk-wallet-connect-provider@2.4.1/out/walletConnectProvider.umd.js"></script>

<style>
body {
    background:#0e0e0e;
    color:#fff;
    font-family:Arial, sans-serif;
    text-align:center;
}
button {
    padding:14px 28px;
    border:none;
    border-radius:8px;
    background:#ff9800;
    font-size:16px;
    cursor:pointer;
}
.status { margin-top:15px; }
</style>
</head>

<body>

<h1>âš”ï¸ ODINVERSE</h1>
<button id="connectBtn">ğŸ” Connect Wallet</button>
<div class="status" id="status">âŒ Non connectÃ©</div>
<div class="status" id="address"></div>

<script>
let provider;

const statusEl = document.getElementById("status");
const addressEl = document.getElementById("address");
const connectBtn = document.getElementById("connectBtn");

connectBtn.onclick = connectWallet;

async function connectWallet() {
    statusEl.innerText = "ğŸ”„ Connexion en cours...";
    addressEl.innerText = "";

    try {
        // âœ… BON objet global (le seul valide)
        if (typeof WalletConnectProvider === "undefined") {
            throw new Error("SDK WalletConnect non chargÃ©");
        }

        provider = new WalletConnectProvider({
            projectId: "f4f84c031236a02d1fda5167859868f4",
            chainId: "1", // Mainnet | "T" Testnet
            relayUrl: "wss://relay.walletconnect.com"
        });

        await provider.init();

        await provider.login({
            callbackUrl: window.location.href,
            qrCodeModal: true
        });

        const address = provider.getAddress();

        statusEl.innerText = "âœ… Wallet connectÃ©";
        addressEl.innerText = "ğŸŸ¢ " + address;
        connectBtn.disabled = true;
        connectBtn.innerText = "ğŸ”“ Wallet connectÃ©";

    } catch (err) {
        console.error(err);
        statusEl.innerText = "âŒ Erreur : " + err.message;
    }
}
</script>

</body>
</html>
